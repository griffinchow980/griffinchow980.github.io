---
title: 图表渲染示例
date: 2023-02-12
slug: charts-code
tags: [chart]
summary: "图表渲染"
---

下面演示如何在 Markdown 代码块中直接渲染各类图表。注意：页面上只显示图，不显示原始代码块。

```mermaid
flowchart TB
    A[客户端] -->|① 通信协议| B[查询缓存]

    B -->|② 有缓存命中返回结果| A
    B -->|无缓存| C[解析器]

    C -->|③ 语法解析| D[预处理器]
    D --> E[查询优化器]
    E -->|④ 执行计划| F[查询执行引擎]
    F -->|⑤ API接口查询| G[存储引擎]

    G -->|返回数据| F
    F -->|结果| B
    B -->|⑥ 缓存结果并返回| A

    subgraph 服务器
        B
        C
        D
        E
        F
    end

    subgraph 存储引擎
        G --> H[MyISAM / InnoDB ...]
        H --> I[(数据)]
    end

```

## Mermaid

流程图
```mermaid
flowchart TB
    c1-->a2
    subgraph one
    a1-->a2
    end
    subgraph two
    b1-->b2
    end
    subgraph three
    c1-->c2
    end
    one --> two
    three --> two
    two --> c2
```
循序图
```mermaid
sequenceDiagram
    autonumber
    Alice->>John: Hello John, how are you?
    loop HealthCheck
        John->>John: Fight against hypochondria
    end
    Note right of John: Rational thoughts!
    John-->>Alice: Great!
    John->>Bob: How about you?
    Bob-->>John: Jolly good!
```
类图
```mermaid
classDiagram
  direction RL
  class Student {
    -idCard : IdCard
  }
  class IdCard{
    -id : int
    -name : string
  }
  class Bike{
    -id : int
    -name : string
  }
  Student "1" --o "1" IdCard : carries
  Student "1" --o "1" Bike : rides
```
甘特图
```mermaid
gantt
    dateFormat  YYYY-MM-DD
    title       Adding GANTT diagram functionality to mermaid
    excludes    weekends
    %% (`excludes` accepts specific dates in YYYY-MM-DD format, days of the week ("sunday") or "weekends", but not the word "weekdays".)

    section A section
    Completed task            :done,    des1, 2014-01-06,2014-01-08
    Active task               :active,  des2, 2014-01-09, 3d
    Future task               :         des3, after des2, 5d
    Future task2              :         des4, after des3, 5d

    section Critical tasks
    Completed task in the critical line :crit, done, 2014-01-06,24h
    Implement parser and jison          :crit, done, after des1, 2d
    Create tests for parser             :crit, active, 3d
    Future task in critical line        :crit, 5d
    Create tests for renderer           :2d
    Add to mermaid                      :until isadded
    Functionality added                 :milestone, isadded, 2014-01-25, 0d

    section Documentation
    Describe gantt syntax               :active, a1, after des1, 3d
    Add gantt diagram to demo page      :after a1  , 20h
    Add another diagram to demo page    :doc1, after a1  , 48h

    section Last section
    Describe gantt syntax               :after doc1, 3d
    Add gantt diagram to demo page      :20h
    Add another diagram to demo page    :48h
```
git图
```mermaid
block-beta
columns 1
  db(("DB"))
  blockArrowId6<["&nbsp;&nbsp;&nbsp;"]>(down)
  block:ID
    A
    B["A wide one in the middle"]
    C
  end
  space
  D
  ID --> D
  C --> D
  style B fill:#969,stroke:#333,stroke-width:4px

```
包图
```mermaid
---
title: "TCP Packet"
---
packet
    0-15: "Source Port"
    16-31: "Destination Port"
    32-63: "Sequence Number"
    64-95: "Acknowledgment Number"
    96-99: "Data Offset"
    100-105: "Reserved"
    106: "URG"
    107: "ACK"
    108: "PSH"
    109: "RST"
    110: "SYN"
    111: "FIN"
    112-127: "Window"
    128-143: "Checksum"
    144-159: "Urgent Pointer"
    160-191: "(Options and Padding)"
    192-255: "Data (variable length)"

```

```mermaid
flowchart LR
  %% 定义变量 a 的内存格，显示值 5
  subgraph a
  A["5"]:::mem
  end
  %% 定义指针 p 的内存格，显示存储的地址 &a
  subgraph p
  P["&a"]:::mem
  end
  %% 指针从 p 指向 a
  p -- 指向 --> a
```

## Flowchart.js

```flowchart
st=>start: Start
op=>operation: My Operation
cond=>condition: Yes or No?
e=>end
st->op->cond
cond(yes)->e
cond(no)->op
```

## Markmap（思维导图）

```markmap
---
markmap:
  colorFreezeLevel: 2
---

# markmap

## 链接

- <https://markmap.js.org/>
- [GitHub](https://github.com/markmap/markmap)

## 功能

- 链接
- **强调** ~~删除线~~ *斜体* ==高亮==
- 多行
  文字
- `行内代码`
-
    ```go
    package main

    import "fmt"

    func 
    ```
- Katex
  - $x = {-b \pm\sqrt{b^2-4ac} \over 2a}$
- 现在我们可以通过 `maxWidth` 选项自动换行非常非常非常非常非常非常非常非常非常非常长的内容
```

## PlantUML

```plantuml
@startuml
@startuml
scale 5 as 150 pixels

clock clk with period 1
binary "启用" as en
binary "读/写" as rw
binary "数据有效" as dv
concise "数据总线" as db
concise "地址总线" as addr

@6 as :write_beg
@10 as :write_end

@15 as :read_beg
@19 as :read_end

@0
en is low
db is "0x0"
addr is "0x03f"
rw is low
dv is 0

@:write_beg-3
 en is high
@:write_beg-2
 db is "0xDEADBEEF"
@:write_beg-1
dv is 1
@:write_beg
rw is high

@:write_end
rw is low
dv is low
@:write_end+1
rw is low
db is "0x0"
addr is "0x23"

@12
dv is high
@13
db is "0xFFFF"

@20
en is low
dv is low
@21
db is "0x0"

highlight :write_beg to :write_end #Gold:写
highlight :read_beg to :read_end #lightBlue:读

db@:write_beg-1 <-> @:write_end : 设置时间
db@:write_beg-1 -> addr@:write_end+1 : 保持
@enduml
```
```plantuml
@startuml
abstract class AbstractList
abstract AbstractCollection
interface List
interface Collection

List <|-- AbstractList
Collection <|-- AbstractCollection

Collection <|- List
AbstractCollection <|- AbstractList
AbstractList <|-- ArrayList

class ArrayList {
  Object[] elementData
  size()
}

enum TimeUnit {
  DAYS
  HOURS
  MINUTES
}

annotation SuppressWarnings

annotation Annotation {
  annotation with members
  String foo()
  String bar()
}
@enduml
```


```plantuml
@startuml
state start1  <<start>>
state choice1 <<choice>>
state fork1   <<fork>>
state join2   <<join>>
state end3    <<end>>

[*]     --> choice1 : from start\nto choice
start1  --> choice1 : from start stereo\nto choice

choice1 --> fork1   : from choice\nto fork
choice1 --> join2   : from choice\nto join
choice1 --> end3    : from choice\nto end stereo

fork1   ---> State1 : from fork\nto state
fork1   --> State2  : from fork\nto state

State2  --> join2   : from state\nto join
State1  --> [*]     : from state\nto end

join2   --> [*]     : from join\nto end
@enduml
```
正则表达式
```plantuml
@startuml
skinparam rectangle {
  RoundCorner 8
}

' 第一行
rectangle "a" as A #lightgrey
rectangle "5" as B
A --> B

' 第二行
rectangle "p" as C #lightgrey
rectangle "&a" as D
C --> D
@enduml
```


组件图
```plantuml
@startuml
package "Some Group" {
  HTTP - [First Component]
  [Another Component]
}

node "Other Groups" {
  FTP - [Second Component]
  [First Component] --> FTP
}

cloud {
  [Example 1]
}

database "MySql" {
  folder "This is my folder" {
    [Folder 3]
  }
  frame "Foo" {
    [Frame 4]
  }
}

[Another Component] --> [Example 1]
[Example 1] --> [Folder 3]
[Folder 3] --> [Frame 4]

@enduml
```


思维导图
```plantuml
@startuml
skinparam rectangle {
    BackgroundColor<<header>> LightBlue
    BackgroundColor<<data>> LightGreen
    BorderColor Black
}

rectangle "TCP 报文" {
    rectangle "源端口 (16 bits)" <<header>>
    rectangle "目的端口 (16 bits)" <<header>>
    rectangle "序列号 (32 bits)" <<header>>
    rectangle "确认号 (32 bits)" <<header>>
    rectangle "数据偏移/保留/标志 (16 bits)" <<header>>
    rectangle "窗口大小 (16 bits)" <<header>>
    rectangle "校验和 (16 bits)" <<header>>
    rectangle "紧急指针 (16 bits)" <<header>>
    rectangle "选项 (可选)" <<header>>
    rectangle "数据 (可变长度)" <<data>>
}
@enduml

```



## ECharts



```echarts
{
  "title": { "text": "示例柱状图" },
  "tooltip": { "trigger": "axis", "show": true },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "xAxis": { "type": "category", "data": ["A","B","C","D","E"] },
  "yAxis": { "type": "value" },
  "series": [{ "type": "bar", "data": [5, 20, 36, 10, 10] }]
}
```
```echarts
{
  "title": { "text": "示例饼图" },
  "tooltip": { "trigger": "item", "show": true },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "series": [{
    "type": "pie",
    "radius": "60%",
    "data": [
      { "value": 1048, "name": "Search" },
      { "value": 735, "name": "Direct" },
      { "value": 580, "name": "Email" },
      { "value": 484, "name": "Union Ads" },
      { "value": 300, "name": "Video Ads" }
    ]
  }]
}
```
```echarts
{
  "title": { "text": "示例散点图" },
  "tooltip": { "show": true },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "xAxis": {},
  "yAxis": {},
  "series": [{ "type": "scatter", "symbolSize": 10, "data": [[10,8],[20,15],[30,10],[40,20],[50,16]] }]
}
```

```echarts
{
  "title": { "text": "南丁格尔" },
  "legend": {
    "top": "bottom"
  },
  "toolbox": {
    "show": true,
    "feature": {
      "mark": {
        "show": true
      },
      "dataView": {
        "show": true,
        "readOnly": false
      },
      "restore": {
        "show": true
      },
      "saveAsImage": {
        "show": true
      }
    }
  },
  "series": [
    {
      "name": "Nightingale Chart",
      "type": "pie",
      "radius": [20, 100],
      "center": ["50%", "50%"],
      "roseType": "area",
      "itemStyle": {
        "borderRadius": 8
      },
      "data": [
        {
          "value": 40,
          "name": "rose 1"
        },
        {
          "value": 38,
          "name": "rose 2"
        },
        {
          "value": 32,
          "name": "rose 3"
        },
        {
          "value": 30,
          "name": "rose 4"
        },
        {
          "value": 28,
          "name": "rose 5"
        },
        {
          "value": 26,
          "name": "rose 6"
        },
        {
          "value": 22,
          "name": "rose 7"
        },
        {
          "value": 18,
          "name": "rose 8"
        }
      ]
    }
  ]
}
```
```echarts
{
  "title": { "text": "示例雷达图" },
  "tooltip": { "show": true },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "legend": { "top": "top" },
  "radar": {
    "indicator": [
      { "name": "销售", "max": 6500 },
      { "name": "管理", "max": 16000 },
      { "name": "信息技术", "max": 30000 },
      { "name": "客服", "max": 38000 },
      { "name": "研发", "max": 52000 },
      { "name": "市场", "max": 25000 }
    ],
    "center": ["50%", "55%"]
  },
  "series": [
    {
      "name": "预算 vs 开销",
      "type": "radar",
      "data": [
        { "value": [4200, 3000, 20000, 35000, 50000, 18000], "name": "预算" },
        { "value": [5000, 14000, 28000, 26000, 42000, 21000], "name": "开销" }
      ]
    }
  ]
}
```
```echarts
{
  "title": { "text": "四象限函数图 (Weierstrass Function)" },
  "tooltip": { "trigger": "axis" },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "xAxis": { "type": "value", "min": -10, "max": 10 },
  "yAxis": { "type": "value", "min": -2, "max": 2 },
  "series": [
    {
      "type": "line",
      "data": [
        [-10, -0.544], [-9.8, -0.366], [-9.6, -0.185], [-9.4, -0.005], [-9.2, 0.175],
        [-9.0, 0.355], [-8.8, 0.535], [-8.6, 0.714], [-8.4, 0.894], [-8.2, 1.073],
        [-8.0, 1.252], [-7.8, 1.431], [-7.6, 1.610], [-7.4, 1.788], [-7.2, 1.967],
        [-7.0, 2.145], [-6.8, 2.322], [-6.6, 2.499], [-6.4, 2.676], [-6.2, 2.852],
        [-6.0, 3.028], [-5.8, 2.852], [-5.6, 2.676], [-5.4, 2.499], [-5.2, 2.322],
        [-5.0, 2.145], [-4.8, 1.967], [-4.6, 1.788], [-4.4, 1.610], [-4.2, 1.431],
        [-4.0, 1.252], [-3.8, 1.073], [-3.6, 0.894], [-3.4, 0.714], [-3.2, 0.535],
        [-3.0, 0.355], [-2.8, 0.175], [-2.6, -0.005], [-2.4, -0.185], [-2.2, -0.366],
        [-2.0, -0.544], [-1.8, -0.366], [-1.6, -0.185], [-1.4, -0.005], [-1.2, 0.175],
        [-1.0, 0.355], [-0.8, 0.535], [-0.6, 0.714], [-0.4, 0.894], [-0.2, 1.073],
        [0.0, 1.252], [0.2, 1.073], [0.4, 0.894], [0.6, 0.714], [0.8, 0.535],
        [1.0, 0.355], [1.2, 0.175], [1.4, -0.005], [1.6, -0.185], [1.8, -0.366],
        [2.0, -0.544], [2.2, -0.366], [2.4, -0.185], [2.6, -0.005], [2.8, 0.175],
        [3.0, 0.355], [3.2, 0.535], [3.4, 0.714], [3.6, 0.894], [3.8, 1.073],
        [4.0, 1.252], [4.2, 1.073], [4.4, 0.894], [4.6, 0.714], [4.8, 0.535],
        [5.0, 0.355], [5.2, 0.175], [5.4, -0.005], [5.6, -0.185], [5.8, -0.366],
        [6.0, -0.544], [6.2, -0.366], [6.4, -0.185], [6.6, -0.005], [6.8, 0.175],
        [7.0, 0.355], [7.2, 0.535], [7.4, 0.714], [7.6, 0.894], [7.8, 1.073],
        [8.0, 1.252], [8.2, 1.073], [8.4, 0.894], [8.6, 0.714], [8.8, 0.535],
        [9.0, 0.355], [9.2, 0.175], [9.4, -0.005], [9.6, -0.185], [9.8, -0.366],
        [10.0, -0.544]
      ],
      "smooth": true,
      "showSymbol": false
    }
  ]
}
```

```echarts
{
  "title": { "text": "Two Value-Axes in Polar" },
  "tooltip": { "trigger": "axis" },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "polar": {},
  "angleAxis": { "type": "value", "startAngle": 0 },
  "radiusAxis": { "type": "value" },
  "series": [
    {
      "type": "line",
      "coordinateSystem": "polar",
      "data": [[0, 0], [30, 10], [60, 20], [90, 30], [120, 40], [150, 50], [180, 60]],
      "name": "Line A"
    },
    {
      "type": "line",
      "coordinateSystem": "polar",
      "data": [[0, 0], [30, -10], [60, -20], [90, -30], [120, -40], [150, -50], [180, -60]],
      "name": "Line B"
    }
  ],
  "legend": { "show": true, "top": "top" }
}
```

```echarts
{
  "title": { "text": "关系图（力引导布局）" },
  "tooltip": { "show": true },
  "toolbox": {
    "show": true,
    "feature": {
      "dataView": { "show": true, "readOnly": false },
      "restore": { "show": true },
      "saveAsImage": { "show": true }
    }
  },
  "legend": {
    "data": ["HTMLElement", "WebGL", "SVG", "CSS", "Other"]
  },
  "series": [
    {
      "type": "graph",
      "layout": "force",
      "animation": false,
      "roam": true,
      "scaleLimit": { "max": 8, "min": 0.5 },
      "label": {
        "position": "right",
        "formatter": "{b}"
      },
      "draggable": true,
      "data": [
        { "name": "HTMLElement", "category": 0, "value": 10, "symbolSize": 40 },
        { "name": "WebGL", "category": 1, "value": 20, "symbolSize": 50 },
        { "name": "SVG", "category": 2, "value": 15, "symbolSize": 45 },
        { "name": "CSS", "category": 3, "value": 8, "symbolSize": 35 },
        { "name": "Other", "category": 4, "value": 12, "symbolSize": 38 }
      ],
      "categories": [
        { "name": "HTMLElement" },
        { "name": "WebGL" },
        { "name": "SVG" },
        { "name": "CSS" },
        { "name": "Other" }
      ],
      "force": {
        "edgeLength": 100,
        "repulsion": 200,
        "gravity": 0.3
      },
      "links": [
        { "source": "HTMLElement", "target": "WebGL" },
        { "source": "HTMLElement", "target": "SVG" },
        { "source": "WebGL", "target": "CSS" },
        { "source": "SVG", "target": "CSS" },
        { "source": "CSS", "target": "Other" }
      ]
    }
  ]
}
```